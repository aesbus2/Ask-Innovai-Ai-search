# Python version requirement: 3.11+
# Enhanced requirements.txt for Ask InnovAI with Vector Search & Memory Management
# Version: 5.0.0 - Production-ready with all dependencies fixed
# Last Updated: January 2025

# ==============================================================================
# CORE WEB FRAMEWORK (Required)
# ==============================================================================
fastapi>=0.110.0,<0.112.0  # Pinned to minor version for stability
uvicorn[standard]>=0.27.1,<0.30.0
python-dotenv>=1.0.1
python-multipart>=0.0.9
aiofiles>=23.2.1  # MISSING - Required for async file operations in app.py

# ==============================================================================
# HTTP CLIENTS (Required)
# ==============================================================================
requests>=2.31.0,<3.0.0
aiohttp>=3.9.0,<4.0.0  # Updated from 3.8.0
httpx>=0.24.1,<1.0.0  # MISSING - Recommended for OpenAI SDK

# ==============================================================================
# AI/ML STACK (Required for Vector Search)
# ==============================================================================
# OpenAI for Digital Ocean AI Agent
openai>=1.30.0,<2.0.0

# Embeddings stack with compatible versions
sentence-transformers>=3.0.0,<3.1.0
transformers>=4.36.0,<5.0.0  # Updated from 4.30.0
torch>=2.1.0,<2.3.0  # Updated from 2.0.0 for better stability
numpy>=1.24.0,<1.27.0  # Updated from 1.22.0 - compatible with torch
scipy>=1.11.0,<2.0.0  # MISSING - Required by sentence-transformers

# Model management
tokenizers>=0.15.0,<0.16.0  # Updated from 0.13.0
safetensors>=0.4.0,<0.5.0  # Updated from 0.3.0
huggingface-hub>=0.20.0,<1.0.0  # Updated from 0.16.0

# ==============================================================================
# DATABASE (Required)
# ==============================================================================
opensearch-py>=2.4.0,<3.0.0

# ==============================================================================
# DATA PROCESSING (Required)
# ==============================================================================
pydantic>=2.5.0,<3.0.0  # Updated from 2.0.0
beautifulsoup4>=4.12.0,<5.0.0
lxml>=4.9.3,<5.0.0  # MISSING - Speeds up BeautifulSoup4

# ==============================================================================
# SYSTEM MONITORING (Required)
# ==============================================================================
psutil>=5.9.6,<6.0.0  # Updated from 5.9.0

# ==============================================================================
# ASYNC & RATE LIMITING (Required for Production)
# ==============================================================================
asyncio-throttle>=1.0.0,<2.0.0
anyio>=4.2.0,<5.0.0  # MISSING - Better async compatibility

# ==============================================================================
# OPTIONAL BUT RECOMMENDED
# ==============================================================================
# Uncomment these for better performance:
# orjson>=3.9.10  # 10x faster JSON serialization
# python-json-logger>=2.0.7  # Structured logging
# prometheus-client>=0.19.0  # Metrics collection

# ==============================================================================
# NOTES
# ==============================================================================
# Installation:
#   pip install --no-cache-dir -r requirements.txt
#
# For GPU support (faster embeddings):
#   pip uninstall torch
#   pip install torch --index-url https://download.pytorch.org/whl/cu118
#
# Memory requirements:
#   - Minimum: 4GB RAM
#   - Recommended: 8GB+ RAM for vector operations
#   - Disk: ~3-5GB for all dependencies
#
# Known issues:
#   - If sentence-transformers fails, install without deps first:
#     pip install sentence-transformers --no-deps
#     pip install -r requirements.txt